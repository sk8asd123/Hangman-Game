<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>
      hangman test
    </title>
  </head>
  <body>
    <script type="text/javascript">

    var words = ['apple', 'banana', 'carrot', 'dinosaur', 'python', 'project', 'fire', 'goat', 'shrimp', 'lobster', 'rabbit', 
    'house']

    //initial hidden word
    function hideWord(word) {
      var hidden_word = "" 
        for (var j = 0; j < word.length; j++) {
          hidden_word = hidden_word + "*";
        }
        return hidden_word;
      }


      // find if letter is in secret word
      function revealWord(letter, answer_word, masked_word, incorrect_letter_guesses){
        var new_word = '';

        if (letter.length != 1){
          guess_count -= 1;
          console.log("incorrect guess");
          return masked_word;
        }

        if (incorrect_letter_guesses.has(letter) || masked_word.indexOf(letter) != -1) {
          console.log("letter already guessed");
          return masked_word;
        }

        if (answer_word.indexOf(letter) === -1)
        {
          guess_count -= 1;
          incorrect_letter_guesses.add(letter);
          console.log("invalid letter");
          return masked_word;
        }


        for (var i = 0; i < answer_word.length; i++){
          if (letter == answer_word[i]){
            new_word += letter;
          }
          else {
            new_word += masked_word[i];
          }
        }
      return new_word;
      } 

      // returns true if player has won
      function winGame(answer_word, masked_word){
        if(answer_word === masked_word) {
          console.log("You win!!!");
          return true;
        }
        return false;
      }

      // returns true if player has lost
      function loseGame(guess_count){
        if (guess_count <= 0){
          console.log("you lose");
          return true;
        }
        return false;
      }

      // game over if a player has won or lost
      function gameOver(winGame, loseGame){
        return (winGame || loseGame);
      }
        // get random word from list
        var answer_word = words[Math.floor(Math.random() * words.length)];
        var guess_count = 7;

        var incorrect_letter_guesses = new Set();
        // for testing only
        console.log(answer_word);
        var masked_word = hideWord(answer_word);
        // for testing only
        console.log(masked_word);


        while (! gameOver(loseGame(guess_count), winGame(answer_word, masked_word))){
            var letter_guess = prompt("What letter?");
            masked_word = revealWord(letter_guess.toLowerCase(), answer_word, masked_word, incorrect_letter_guesses);
            console.log(masked_word);
            console.log("guesses reminaining: " + guess_count);

            incorrect_letter_guesses.forEach(function (item) {  
            console.log(item.toString() + ", ");  
              });  
        }

    </script>
  </body>
</html>
